<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DSR demo</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        html,
        body {
            background: #d5d5d5;
        }

        .canvas-box {
            width: 650px;
            height: 490px;
            margin: 40px auto 0;
        }

        canvas {}

        .btn-box {
            width: 100%;
            text-align: center;
            margin-top: 30px;
        }

        .btn {
            width: 120px;
            height: 40px;
        }

        .btn.disabled {
            cursor: not-allowed;
            opacity: .5;
        }

        .sub-title {
            line-height: 50px;
        }

        .theme-btn {
            width: 120px;
            height: 40px;
        }

        .theme-btn.act {
            color: red;
        }

        .btn-clean {
            position: fixed;
            width: 120px;
            height: 40px;
            top: 160px;
            right: 50px;
        }
    </style>
</head>

<body>
    <div class="btn-box">
        <p class="sub-title">主题按钮</p>
        <button class="theme-btn act" data-theme="0">流星系列</button>
        <button class="theme-btn" data-theme="1">浓情系列</button>
    </div>

    <!-- canvas父容器 -->
    <div class="canvas-box" id="canvas-box"></div>

    <div class="btn-box">
        <p class="sub-title">流星系列-物件按钮</p>
        <button class="btn" data-name="face0.png">有趣-face0</button>
        <button class="btn" data-name="face1.png">微笑-face1</button>
        <button class="btn" data-name="face2.png">狂笑-face2</button>
    </div>
    <div class="btn-box">
        <p class="sub-title">浓情系列-物件按钮</p>
        <button class="btn" data-name="iu0.png">声哥1-iu0</button>
        <button class="btn" data-name="iu1.jpg">声哥2-iu1</button>
        <button class="btn" data-name="moba.png">平安京-moba</button>
    </div>

    <!-- <button class="btn-clean">清空</button> -->

    <script src="https://nie.res.netease.com/comm/js/jquery(mixNIE).1.11.js"></script>
    <!-- <script src="https://nie.res.netease.com/comm/js/zepto(mixNIE).last.js"></script> -->
    <script src="pixi.min.js"></script>
    <script src="tink.js"></script>
    <script src="dsr.js"></script>
    <script>
        let theme_resources = [
            __uri('assets/sprite.json'),
            __uri('assets/sprite2.json')
        ];

        //实例化dsr
        let _dsr = new DSR({
            id: "#canvas-box", //canvas父容器id，用于插入canvas画布【必传】
            btns: ".btn", //按钮className【必传】
            width: 650, //canvas width【必传】
            height: 490, //canvas height【必传】
            resources: theme_resources, //图片资源【必传】
            bgColor: '#42496b', //画布背景色，选传，默认白色#fff【选传】
            onInit: function () { //【选传】
                //初始化完成回调
                console.log('init complete!');
            },
            onLoad: function (loader, resource) {
                console.log("loading -- " + loader.progress.toFixed(0) + '%');
            },
            onLoaded: function () {
                console.log('resource loaded!');
            },
            onResize: function() {
                console.log('resize!');
            }
        });

        //切换主题
        $(".theme-btn").on('click', function() {
            let _i = $(this).data('theme');

            // _dsr._App.renderer.backgroundColor = 0x42496b;
            $(this).addClass('act').siblings().removeClass('act');
            //切换主题
            _dsr.change(theme_resources[_i]);
        })

        //清空当前画面内容
        // $(".btn-clean").on('click', function() {
        //     _dsr.clean();
        // })

        console.log(_dsr);
    </script>
</body>

</html>